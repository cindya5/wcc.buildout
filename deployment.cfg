[buildout]
extends = buildout.cfg munin.cfg site.cfg releaseversions.cfg
effective-user = ${site:effective-user}
parts += 
    instance2
    instance3
    instance4
    instancedbg
    zeoserver

find-links += 
    ${buildout:directory}/egg_repo

auto-checkout = 
sources = nosources
policies = 
    wcc.policy
    wcc.assemblypolicy
    wcc.ewnpolicy

newest = false

[versions]
docutils = 0.9.1
Products.PloneHotfix20121106 = 1.2

[nosources]

[instance]
http-address = ${site:instance-address}
zeo-address = ${zeoserver:zeo-address}
zeo-client = on
shared-blob = on
environment-vars =
    PYTHON_EGG_CACHE ${buildout:pyeggcache-directory}
    HOME ${buildout:directory}/var/
    TMPDIR ${buildout:directory}/var/tmp/ 
    zope_i18n_compile_mo_files true
    WCC_JSONAPI_SECRET ${secrets:jsonapi-secret}

zope-conf-additional +=
    <product-config munin.zope>
        secret ${secrets:munin-secret}
    </product-config>

[instance2]
<= instance
http-address = ${site:instance2-address}

[instance3]
<= instance
http-address = ${site:instance3-address}

[instance4]
<= instance
http-address = ${site:instance4-address}

zope-conf-additional = 
    <product-config munin.zope>
        secret ${secrets:munin-secret}
    </product-config>

    ${site:service-zcml-conf}

[instancedbg]
<= instance
http-address = ${site:instancedbg-address}

[zeoserver]
recipe = plone.recipe.zeoserver
zeo-address = ${site:zeoserver-address}
zeo-log = ${buildout:log-directory}/${:_buildout_section_name_}.log
file-storage = ${buildout:data-directory}/filestorage/Data.fs
blob-storage = ${buildout:data-directory}/blobstorage/
effective-user = ${buildout:effective-user}
pack-days = 30
